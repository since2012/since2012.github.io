(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{87:function(a,e,t){"use strict";t.r(e);var r=t(0),s=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker")]),t("h2",{attrs:{id:"启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动容器","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动容器")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -it -p 80:80 -d <image_id>\n")])]),t("h2",{attrs:{id:"进入镜像的shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入镜像的shell","aria-hidden":"true"}},[a._v("#")]),a._v(" 进入镜像的shell")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -t -i ubuntu /bin/bash\n")])]),t("p",[a._v("官网是这么说的：")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run: runs a container.\nubuntu: is the image you would like to run.\n-t: flag assigns a pseudo-tty or terminal inside the new container.\n-i: flag allows you to make an interactive connection by grabbing the standard in (STDIN) of the container.\n/bin/bash: launches a Bash shell inside our container.\n\n")])]),t("p",[a._v("docker run：启动container\nubuntu：你想要启动的image\n-t：进入终端\n-i：获得一个交互式的连接，通过获取container的输入\n/bin/bash：在container中启动一个bash shell")]),t("p",[a._v("这样就进入container的内部了：")]),t("p",[a._v("|root@af8bae53bdd3:/#")]),t("h2",{attrs:{id:"进入运行中的container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入运行中的container","aria-hidden":"true"}},[a._v("#")]),a._v(" 进入运行中的container")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker exec -it <container_id> bash\n")])]),t("h2",{attrs:{id:"copy文件进去或者copy出来"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#copy文件进去或者copy出来","aria-hidden":"true"}},[a._v("#")]),a._v(" copy文件进去或者copy出来")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker cp ntuser.ini 09:/var/www/html\ndocker cp 09:/var/www/html/index.html d:/\n")])]),t("p",[a._v("09为containeid的前2位。")]),t("h2",{attrs:{id:"查看容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看容器")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker ps \ndocker ps -a\n")])]),t("h2",{attrs:{id:"docker容器中安装vim"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker容器中安装vim","aria-hidden":"true"}},[a._v("#")]),a._v(" docker容器中安装vim")]),t("p",[a._v("先 apt-get update  重新获取软件包列表 ， 然后 apt-get install vim 安装即可。")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("apt-get install curl\napt-get install net-tools //netstat\n")])]),t("h2",{attrs:{id:"提交修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交修改","aria-hidden":"true"}},[a._v("#")]),a._v(" 提交修改")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker commit -a xiaofengqing -m 'install vim,curl,net-tools' a4 myubuntu\n")])]),t("h2",{attrs:{id:"rename-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rename-image","aria-hidden":"true"}},[a._v("#")]),a._v(" rename image")]),t("p",[a._v("iamge 无法重命名，只能用tag 新建一个")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker tag <image_id> <新名字>\n")])]),t("h2",{attrs:{id:"delete-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete-image","aria-hidden":"true"}},[a._v("#")]),a._v(" delete image")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker rmi <image_id>\n")])]),t("h2",{attrs:{id:"容器操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器操作","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器操作")]),t("h3",{attrs:{id:"重命名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重命名","aria-hidden":"true"}},[a._v("#")]),a._v(" 重命名")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker rename a1917ec9b776 ng\n")])]),t("h3",{attrs:{id:"查看详细"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看详细","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看详细")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker top ng\n")])]),t("h3",{attrs:{id:"查看容器中运行着哪些进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器中运行着哪些进程","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看容器中运行着哪些进程")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker top nginx_dist\nUID     PID      PPID     C     STIME     TTY    TIME         CMD\nroot    24378    18471    0     15:25     ?      00:00:00     nginx: master process nginx -g daemon off;\n101     24433    24378    0     15:25     ?      00:00:00     nginx: worker process\n")])]),t("h3",{attrs:{id:"查看容器ip和主机等信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器ip和主机等信息","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看容器IP和主机等信息")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('docker inspect nginx_dist |grep 172.17\n        "Gateway": "172.17.42.1",\n        "IPAddress": "172.17.42.6",\n')])]),t("p",[a._v("连接到容器上，--sig-proxy可以保证 Ctrl+D、Ctrl+C 不会退出")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(" docker attach --sig-proxy=false nginx_dist \n")])]),t("h2",{attrs:{id:"设置一些别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置一些别名","aria-hidden":"true"}},[a._v("#")]),a._v(" 设置一些别名")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("alias c='docker container ls'\nalias d='docker'\nalias i='docker images'\nalias ll='ls -l'\nalias ls='ls -F --color=auto --show-control-chars'\nalias r='docker run -i -t -d'\n")])]),t("h2",{attrs:{id:"下载boot2docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载boot2docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载boot2docker")]),t("p",[a._v("启动的时候会去github下载镜像，手工下载放到这个目录。(用迅雷下载，慢了就暂停再开始，能达到40-60k每秒)")]),t("p",[a._v("(default) Downloading C:\\Users\\Administrator.docker\\machine\\cache\\boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v17.11.0-ce/boot2docker.iso...")]),t("p",[a._v("C:\\Users\\Administrator.docker\\machine\\cache\\boot2docker.iso")]),t("p",[a._v("刚刚过了几天，最新版怎么变成了下面的了？")]),t("p",[a._v("(default) Downloading C:\\Users\\Administrator.docker\\machine\\cache\\boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v17.09.1-ce/boot2docker.iso...")]),t("h2",{attrs:{id:"阿里云docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#阿里云docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 阿里云docker")]),t("p",[a._v("登录阿里云docker registry:")]),t("p",[a._v("$ sudo docker login --username=xwjie2016 registry.cn-hangzhou.aliyuncs.com\n登录registry的用户名是您的阿里云账号全名，密码是您开通服务时设置的密码。")]),t("p",[a._v("你可以在镜像管理首页点击右上角按钮修改docker login密码。")]),t("p",[a._v("从registry中拉取镜像：")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ sudo docker pull registry.cn-hangzhou.aliyuncs.com/xiaofengqing/main:[镜像版本号]\n将镜像推送到registry：\n\n$ sudo docker login --username=xwjie2016 registry.cn-hangzhou.aliyuncs.com\n$ sudo docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/xiaofengqing/main:[镜像版本号]\n$ sudo docker push registry.cn-hangzhou.aliyuncs.com/xiaofengqing/main:[镜像版本号]\n其中[ImageId],[镜像版本号]请你根据自己的镜像信息进行填写。\n")])]),t("h2",{attrs:{id:"搜索镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 搜索镜像")]),t("p",[a._v("https://dev.aliyun.com/search.html")]),t("p",[a._v("搜索到之后，里面已经有命令，直接复制下来。")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker pull registry.cn-zhangjiakou.aliyuncs.com/cytong/redis\ndocker pull registry.cn-hangzhou.aliyuncs.com/wangbs/mongodb\n")])]),t("h2",{attrs:{id:"daocloud"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#daocloud","aria-hidden":"true"}},[a._v("#")]),a._v(" daocloud")]),t("p",[a._v("http://026460a6.m.daocloud.io")])])}],!1,null,null,null);e.default=s.exports}}]);